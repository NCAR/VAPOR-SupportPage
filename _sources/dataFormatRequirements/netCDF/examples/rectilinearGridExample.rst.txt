
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "dataFormatRequirements/netCDF/examples/rectilinearGridExample.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        Click :ref:`here <sphx_glr_download_dataFormatRequirements_netCDF_examples_rectilinearGridExample.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_dataFormatRequirements_netCDF_examples_rectilinearGridExample.py:


rectilinearGridExample.py
=========================
This script applies the CF Conventions to a basic NetCDF file so Vapor can read it.
It performs the the following:
   - Creates "Coordinate Variables" for the spatial and time dimensions
   - Adds the "axis" attributes to these new Coordinate Variables
   - Adds the "units" attribute to these new Coordinate Variables

The sample data for this script can be downloaded here:
    https://github.com/NCAR/VAPOR-Data/blob/main/netCDF/simple.nc

.. GENERATED FROM PYTHON SOURCE LINES 17-18

Import packages:

.. GENERATED FROM PYTHON SOURCE LINES 18-24

.. code-block:: default


    import xarray as xr
    import numpy as np
    from pathlib import Path
    # sphinx_gallery_thumbnail_path = '_images/rectilinear.png'


.. GENERATED FROM PYTHON SOURCE LINES 25-27

Open sample data as an xarray dataset.
Modify the 'home' variable to point to the directory containing sample data

.. GENERATED FROM PYTHON SOURCE LINES 27-33

.. code-block:: default

    home = str(Path.home())
    simpleNC = home + "/simple.nc"
    ds = xr.open_dataset(simpleNC)

    ds.info()


.. GENERATED FROM PYTHON SOURCE LINES 34-35

Create a Coordinate Variable for our 'time' dimension and assign a value to it

.. GENERATED FROM PYTHON SOURCE LINES 35-37

.. code-block:: default

    ds['time'] = np.linspace(start=0, stop=0, num=1);


.. GENERATED FROM PYTHON SOURCE LINES 38-42

Generate Coordinate Variables for our x, y, z dimensions.  The coordinates
will monotonically increase in spacing logarithmically, and are generated 
with numpy's geomspace function.
https://numpy.org/doc/stable/reference/generated/numpy.geomspace.html

.. GENERATED FROM PYTHON SOURCE LINES 42-49

.. code-block:: default

  
    ds['y'] = np.geomspace(start=1, stop=100, num=48)
    ds['x'] = np.geomspace(start=1, stop=100, num=48)
    ds['z'] = np.geomspace(start=1, stop=50, num=24)

    ds.info() 


.. GENERATED FROM PYTHON SOURCE LINES 50-52

Give our Coordinate Variables 'axis' attributes so Vapor knows which axes they
apply to

.. GENERATED FROM PYTHON SOURCE LINES 52-58

.. code-block:: default


    ds.time.attrs['axis']      = 'T'
    ds.x.attrs['axis']         = 'X'
    ds.y.attrs['axis']         = 'Y'
    ds.z.attrs['axis']         = 'Z'


.. GENERATED FROM PYTHON SOURCE LINES 59-60

Give our Coordinate Variables 'units' attributes

.. GENERATED FROM PYTHON SOURCE LINES 60-67

.. code-block:: default


    ds.time.attrs['units']     = 'seconds since 2000-0101'
    ds.x.attrs['units']        = 'm'
    ds.y.attrs['units']        = 'm'
    ds.z.attrs['units']        = 'm'



.. GENERATED FROM PYTHON SOURCE LINES 68-69

It's optional but advisable to give our scalar variables a 'units' attribute

.. GENERATED FROM PYTHON SOURCE LINES 69-73

.. code-block:: default

    ds.temperature.attrs['units'] = 'K'

    ds.info()


.. GENERATED FROM PYTHON SOURCE LINES 74-75

Save our file for reading into Vapor

.. GENERATED FROM PYTHON SOURCE LINES 75-77

.. code-block:: default

    ds.to_netcdf( home + "/regularCompliant.nc")


.. GENERATED FROM PYTHON SOURCE LINES 78-79

Plot a 2D cross section of temperature

.. GENERATED FROM PYTHON SOURCE LINES 79-80

.. code-block:: default

    ds.isel(time=0, z=0).temperature.plot(size=6, robust=True);


.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 0 minutes  0.000 seconds)


.. _sphx_glr_download_dataFormatRequirements_netCDF_examples_rectilinearGridExample.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example


    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: rectilinearGridExample.py <rectilinearGridExample.py>`

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: rectilinearGridExample.ipynb <rectilinearGridExample.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
